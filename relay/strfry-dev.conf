# Minimoonoir Development Relay Configuration
# Simple config for local testing - no auth required

db = "/app/strfry-db/"

relay {
    name = "Minimoonoir Dev Relay"
    description = "Development relay for local testing"
    pubkey = "49dfa09158b64f1c42c584a7e3e9adb4c9e8ea9d391ff11c2ac262d1bebbc5a2"
    contact = "dev@localhost"

    bind = "0.0.0.0"
    port = 7777
    noTLS = true

    maxWebsocketPayloadKB = 131072

    autoPingSeconds = 55
    enableTCPKeepalive = false

    maxFilterLimit = 500
    maxSubsPerConnection = 20
}

events {
    rejectEventsNewerThanSeconds = 900
    rejectEventsOlderThanSeconds = 94608000
    rejectEphemeralEventsOlderThanSeconds = 60
    ephemeralEventsLifetimeSeconds = 300
    maxEventSize = 65536
    maxNumTags = 2000
    maxTagValSize = 1024
}

# Write policy for development
# NOTE: In production, use strfry.conf which has auth-whitelist.js plugin
# For dev, we use a permissive policy but log warnings
writePolicy {
    # Log all writes for debugging (no plugin = accept all)
    # For testing auth, uncomment the plugin line below:
    # plugin = "/app/plugins/auth-whitelist.js"
}

negentropy {
    enabled = true
    maxSyncEvents = 1000000
}

dbParams {
    maxreaders = 256
    mapsize = 1073741824
}

compression {
    enabled = true
    level = 3
}

logging {
    level = "info"
}
